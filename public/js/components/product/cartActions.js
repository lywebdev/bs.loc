DOMLoadedHookFunctions.push({call:()=>{let t=$(".single-product-content .add-to-cart"),a=t.find("a");a.click((t=>{t.preventDefault()})),t.bind("click",(e=>{let r=$(e.currentTarget).closest(".single-product-content").data("product-id"),c=$(".cart-plus-minus-box");t.hasClass("added")?$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/cart/unset-cart-item",type:"post",data:{productId:r},success:e=>{a.text("В корзину"),a.css({"background-color":"#755A57"}),a.css({"border-color":"#755A57"}),t.removeClass("added"),window.updateCart()},error:t=>{location.reload()}}):function e(){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/api/cart/set-cart-item",type:"post",data:{productId:r,quantity:parseInt(c.val().match(/\d+/))},success:e=>{a.text("Товар в корзине"),a.css({"background-color":"#525252"}),a.css({"border-color":"#525252"}),t.addClass("added"),window.updateCart()},error:t=>{let a=t.responseJSON,r=a.data.max_quantity,o=a.message;c.val(r),alert(o),e()}})}()}))}});
